<h3>GENERAL PROCEDURES</h3>

<p>
General procedures: stored procedures managing general tasks.
<ul>
	<li><a href="#eval">eval()</a>: Evaluates the queries generated by a given query.</li>
</ul>
</p>

<h3>SYNOPSIS</h3>

<p>
<ul>
	<li>
		<a name="eval" href="#">eval()</a>
		<p>
			Evaluates the queries generated by a given query.
			Given <strong>sql_query</strong> is expected to be a SQL generating query. 
			That is, it is expected to produce,	when invoked, a single text column consisting of SQL queries 
			(one query per row).
			The <strong>eval()</strong> procedure will invoke said query, and then invoke (evaluate) any of 
			the resulting queries.
<blockquote><pre>eval(sql_query TEXT CHARSET utf8) 
  MODIFIES SQL DATA</pre></blockquote>
		</p>
		<p>
			Invoker of this procedure must have the <strong>CREATE TEMPORARY TABLES</strong> privilege, 
			as well as any privileges required for evaluating implied queries.
		</p>
	<h4>EXAMPLES</h4>
		<p>
			In the following example we kill all connections executing queries for more than 
			<strong>20</strong> seconds.
		</p>
<blockquote><pre>mysql&gt; SHOW PROCESSLIST;
+----+------+-----------+---------------+---------+------+------------+---------------------+
| Id | User | Host      | db            | Command | Time | State      | Info                |
+----+------+-----------+---------------+---------+------+------------+---------------------+
|  2 | root | localhost | common_schema | Query   |    0 | NULL       | SHOW PROCESSLIST    |
| 43 | apps | localhost | NULL          | Query   |   28 | User sleep | select sleep(10000) |
+----+------+-----------+---------------+---------+------+------------+---------------------+
2 rows in set (0.00 sec)

mysql&gt; CALL eval('SELECT CONCAT(\'KILL \',id) FROM INFORMATION_SCHEMA.PROCESSLIST WHERE TIME > 20');
Query OK, 0 rows affected (0.01 sec)

mysql&gt; SHOW PROCESSLIST;
+----+------+-----------+---------------+---------+------+-------+------------------+
| Id | User | Host      | db            | Command | Time | State | Info             |
+----+------+-----------+---------------+---------+------+-------+------------------+
|  2 | root | localhost | common_schema | Query   |    0 | NULL  | SHOW PROCESSLIST |
+----+------+-----------+---------------+---------+------+-------+------------------+
1 row in set (0.00 sec)
</pre></blockquote>
	</li>
</ul>
</p>

<h3>ENVIRONMENT</h3>
MySQL 5.1 or newer

<h3>AUTHOR</h3>
Shlomi Noach
